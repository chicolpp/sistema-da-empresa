<!-- Scaffolding generated by Casein v5.1.1.1 -->

<h2>Teste de Vazão</h2>

<%= f.hidden_field :poco_id, value: params[:poco] if params[:poco].present? %>
<%= f.hidden_field :poco_id, value: @vazao_agua.poco_id if @vazao_agua.poco_id.to_i > 0 %>
<div class="row">
	<div class="col-lg-9">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-poco-id">Poço *</span>

			<% if params[:poco].present? || @vazao_agua.poco_id.to_i > 0 %>
				<% disabled = true %>
			<% else %>
				<% disabled = false %>
			<% end %>

			<%= f.collection_select :poco_id, Poco.select("pocos.id, CONCAT(pessoas.nome, '-', pocos.linha_endereco, '-', pocos.apelido_endereco) as nome").joins(cliente: [:pessoa]).order("CONCAT(pessoas.nome, '-', pocos.linha_endereco, '-', pocos.apelido_endereco)").all, :id, :nome, {include_blank: true, selected: params[:poco] || @vazao_agua.poco_id}, {class: "form-control #{f.object.errors[:poco_id].first ? 'input-error' : ''} select_padrao", "aria-describedby" => "addon-poco-id", disabled: disabled} %>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-lg-3">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-data-teste">Data do Teste</span>
			<% f.object.data_teste = f.object.data_teste.strftime('%d/%m/%Y') unless f.object.data_teste.blank? %>
			<%= f.text_field :data_teste, class: "form-control #{f.object.errors[:data_teste].first ? 'input-error' : ''}", "aria-describedby" => "addon-data-teste", data: {masker: true, type: :d} %>
		</div>
	</div>
	<div class="col-lg-3">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-possui-vazao">Possui Teste de Vazão? *</span>
			<%= f.select :possui_vazao, [["Sim", true], ["Não", false]], {}, {class: "checkbox_possui_vazao form-control #{f.object.errors[:possui_vazao].first ? 'input-error' : ''}", "aria-describedby" => "addon-possui-vazao"} %>
		</div>
	</div>
	<div class="col-lg-3">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-possui-vazao">Profundidade da Bomba *</span>
			<%= f.text_field :profundidade_bomba, class: "form-control #{f.object.errors[:profundidade_bomba].first ? 'input-error' : ''}", "aria-describedby" => "addon-profundidade-bomba" %>
		</div>
	</div>
</div>

<div id="dados_tecnicos">
	<h2>Dados Técnicos</h2>

	<div class="row">
		<div class="col-lg-4">
			<div class="input-group">
			  <span class="input-group-addon" id="addon-vazao-teste">Vazão de Teste (l/h) *</span>
				<%= f.text_field :vazao_teste, class: "form-control #{f.object.errors[:vazao_teste].first ? 'input-error' : ''} masc-decimal", "aria-describedby" => "addon-vazao-teste" %>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="input-group">
			  <span class="input-group-addon" id="addon-nivel-dinamico">Nível Dinâmico *</span>
				<%= f.text_field :vazao_dinamico, class: "form-control #{f.object.errors[:vazao_dinamico].first ? 'input-error' : ''} masc-decimal", "aria-describedby" => "addon-nivel-dinamico" %>
			</div>
		</div>
		<div class="col-lg-4">
			<div class="input-group">
			  <span class="input-group-addon" id="addon-nivel-estatico">Nível Estático *</span>
				<%= f.text_field :nivel_estatico, class: "form-control #{f.object.errors[:nivel_estatico].first ? 'input-error' : ''} masc-decimal", "aria-describedby" => "addon-nivel-estatico" %>
			</div>
		</div>
		<div class="col-lg-12">
			<div class="input-group">
			  <span class="input-group-addon" id="addon-observacao">Observação</span>
				<%= f.text_area :observacao, class: "form-control #{f.object.errors[:observacao].first ? 'input-error' : ''}", "aria-describedby" => "addon-observacao" %>
			</div>
		</div>

		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div id="dados_vazao_agua_funcionarios">
				<div class="row">
					<div class="col-lg-12">
						<h2>
							Equipe de Teste de Vazão
							<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Funcionário".html_safe, f, :vazao_agua_funcionarios, "pull-right", "Adicionar um Novo Funcionário", "vazao_agua_funcionarios" %>
						</h2>
					</div>
				</div>
				<div id="vazao_agua_funcionarios">
					<%= f.fields_for :vazao_agua_funcionarios do |vazao_agua_funcionario|%>
					  <%= render "casein/vazao_agua_funcionarios/form", f: vazao_agua_funcionario %>
					<% end %>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row">
	<div id="dados_arquivos">
		<div class="col-lg-12">
			<h2>
				Adicionar Fotos/Documentos
				<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Arquivo".html_safe, f, :arquivos, "pull-right", "Adicionar um Novo Arquivo", "arquivos" %>
			</h2>
		</div>
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div id="arquivos">
				<%= f.fields_for :arquivos do |arquivo|%>
				  <%= render "casein/arquivos/form", f: arquivo %>
				<% end %>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	
	// $(document).ready(function(){
 //    $("#vazao_agua_vazao_teste").inputmask("decimal", { radixPoint: ",", digits: 2, autoGroup: true, groupSeparator: ".", groupSize: 3 });
 //    $("#vazao_agua_vazao_dinamico").inputmask("decimal", { radixPoint: ",", digits: 2, autoGroup: true, groupSeparator: ".", groupSize: 3 });
 //    $("#vazao_agua_nivel_estatico").inputmask("decimal", { radixPoint: ",", digits: 2, autoGroup: true, groupSeparator: ".", groupSize: 3 });
 //    $("#vazao_agua_recuperacao").inputmask("decimal", { radixPoint: ",", digits: 2, autoGroup: true, groupSeparator: ".", groupSize: 3 });
	// });
	jQuery(document).ready(function($) {
		if ($(".checkbox_possui_vazao").val() == "true"){
			$("#dados_vazao_agua_funcionarios").show();
			$("#dados_tecnicos").show();
		} else {
			$("#dados_vazao_agua_funcionarios").hide();
			$("#dados_tecnicos").hide();
		}
	});

	$(".checkbox_possui_vazao").change(function(){
		if ($(this).val() == "true"){
			$("#dados_vazao_agua_funcionarios").show();
			$("#dados_tecnicos").show();
		} else {
			$("#dados_vazao_agua_funcionarios").hide();
			$("#dados_tecnicos").hide();
		}
	});
</script>