<!-- Scaffolding generated by Casein v5.1.1.1 -->

<h2>Dados do Aprofundamento</h2>

<div class="row">
	<div class="col-lg-9">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-poco-id">Poço *</span>

			<% if @aprofundamento.poco_id.to_i > 0 %>
				<% disabled = true %>
			<% else %>
				<% disabled = false %>
			<% end %>

			<%= f.collection_select :poco_id, Poco.select("pocos.id, CONCAT(pessoas.nome, '-', pocos.linha_endereco, '-', pocos.apelido_endereco) as nome").joins(cliente: [:pessoa]).order("CONCAT(pessoas.nome, '-', pocos.linha_endereco, '-', pocos.apelido_endereco)").all, :id, :nome, {include_blank: true, selected: @aprofundamento.poco_id}, {class: "form-control #{f.object.errors[:poco_id].first ? 'input-error' : ''} select_padrao", "aria-describedby" => "addon-poco-id", "data-target" => "#profundidade_atual", disabled: disabled} %>
		</div>
	</div>
</div>

<div class="row">
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-data-aprofundamento-inicio">Data Aprofundamento - Início *</span>
			<% f.object.data_inicio = f.object.data_inicio.strftime('%d/%m/%Y') unless f.object.data_inicio.blank? %>
			<%= f.text_field :data_inicio, class: "form-control #{f.object.errors[:data_inicio].first ? 'input-error' : ''}", "aria-describedby" => "addon-data-aprofundamento-inicio", data: {masker: true, type: :d} %>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-data-aprofundamento-fim">Data Aprofundamento - Fim *</span>
			<% f.object.data_fim = f.object.data_fim.strftime('%d/%m/%Y') unless f.object.data_fim.blank? %>
			<%= f.text_field :data_fim, class: "form-control #{f.object.errors[:data_fim].first ? 'input-error' : ''}", "aria-describedby" => "addon-data-aprofundamento-fim", data: {masker: true, type: :d} %>
		</div>
	</div>
</div>

<div class="row">
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-profundidade-nova">Profundidade Atual</span>
			<%= text_field_tag :profundidade_atual, "", class: "form-control #{f.object.errors[:profundidade_atual].first ? 'input-error' : ''} masc-decimal", "aria-describedby" => "addon-profundidade-nova", disabled: true, value: "" %>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-profundidade-nova">Nova Profundidade *</span>
			<%= f.text_field :profundidade_nova, class: "form-control #{f.object.errors[:profundidade_nova].first ? 'input-error' : ''} masc-decimal", "aria-describedby" => "addon-profundidade-nova" %>
		</div>
	</div>
</div>

<div class="row">
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-maquina-id">Máquina *</span>
			<%= f.collection_select :maquina_id, Maquina.select("id, descricao").order(:descricao).all, :id, :descricao, {include_blank: true}, {class: "form-control #{f.object.errors[:maquina_id].first ? 'input-error' : ''} select_maquina", "aria-describedby" => "addon-maquina-id"} %>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-bitola-id">Bitola Final (mm) *</span>
			<%= f.collection_select :bitola_id, Bitola.select("id, descricao").order(:descricao).all, :id, :descricao, {include_blank: true}, {class: "form-control #{f.object.errors[:bitola_id].first ? 'input-error' : ''} select_bitola", "aria-describedby" => "addon-bitola-id"} %>
		</div>
	</div>
</div>

<div class="row">
  <div class="col-lg-8">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-observacao">Observação</span>
			<%= f.text_area :observacao, class: "form-control #{f.object.errors[:modelo_bomba_id].first ? 'input-error' : ''}", "aria-describedby" => "addon-observacao" %>
		</div>
	</div>
</div>

<div id="dados_aprofundamento_funcionarios">
	<div class="row">
		<div class="col-lg-12">
			<h2>
				Equipe de Perfuração
				<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Funcionário".html_safe, f, :aprofundamento_funcionarios, "pull-right", "Adicionar um Novo Funcionário", "aprofundamento_funcionarios" %>
			</h2>
		</div>
	</div>
	<div id="aprofundamento_funcionarios">
		<%= f.fields_for :aprofundamento_funcionarios do |aprofundamento_funcionario|%>
		  <%= render "casein/aprofundamento_funcionarios/form", f: aprofundamento_funcionario %>
		<% end %>
	</div>
</div>

<div id="dados_entrada_agua">
	<div class="row">
		<div class="col-lg-12">
			<h2>
				Entradas de Água
				<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Entrada".html_safe, f, :entradas_agua, "pull-right", "Adicionar um Novo Entrada de Água", "entradas_agua" %>
			</h2>
		</div>
	</div>
	<div id="entradas_agua">
		<%= f.fields_for :entradas_agua do |entrada_agua|%>
		  <%= render "casein/entradas_agua/form", f: entrada_agua %>
		<% end %>
	</div>
	<% unless @vazao_total.blank? %>
		<p>Nova Vazão Total:<h4 class="vazao_total"></h4></p>
	<% else %>
		<h4>Vazão Total:</h4>
		<h4 class="vazao_total"></h4>
	<% end %>
</div>

<div class="row">
	<div id="dados_arquivos">
		<div class="col-lg-12">
			<h2>
				Adicionar Fotos/Documentos
				<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Arquivo".html_safe, f, :arquivos, "pull-right", "Adicionar um Novo Arquivo", "arquivos" %>
			</h2>
		</div>
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<div id="arquivos">
				<%= f.fields_for :arquivos do |arquivo|%>
				  <%= render "casein/arquivos/form", f: arquivo %>
				<% end %>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
  // $("#aprofundamento_profundidade_nova").inputmask("decimal", { radixPoint: ",", digits: 2, autoGroup: true, groupSeparator: ".", groupSize: 3 });

	// $('#cliente_cliente_id').change(function(){
	// 	$(".poco1").hide();
 //    $.ajax({
 //      url: '<%= carregar_pocos_path %>',
 //      data: {
 //        cliente_id: $(this).val(),
 //        target: $(this).data("target")
 //      }
 //    });
 //  });

  $('#aprofundamento_poco_id').change(function(){
  	$.ajax({
      url: '<%= carregar_dados_poco_path %>',
      data: {
        poco_id: $(this).val(),
        target: $(this).data("target")
      }
    });
  });
</script>