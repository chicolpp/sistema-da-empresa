<!-- Scaffolding generated by Casein v5.1.0.0 -->

<% if @pessoa.errors.any? %>
	<ul>
	  <% @pessoa.errors.full_messages.each do |msg| %>
	    <li><%= msg %></li>
	  <% end %>
	</ul>
<% end %>

<div class="row">
	<% if action_name == "show" || action_name == "update" %>
		<div class="col-lg-2">
			<div class="input-group">
			  <span class="input-group-addon" id="addon-codigo">Código</span>
				<%= f.text_field :id, class: "form-control #{f.object.errors[:id].first ? 'input-error' : ''}", disabled: true, "aria-describedby" => "addon-codigo" %>
			</div>
		</div>
	<% end %>
	<div class="col-lg-3">
		<div class="input-group">
		  <span class="input-group-addon" id="addon-tipo">Tipo de Pessoa</span>
			<%= f.select :tipo, [["Jurídica", true], ["Física", false]], {}, {class: "checkbox_tipo_pessoa form-control", "aria-describedby" => "addon-tipo"} %>
		</div>
	</div>
	<div class="col-lg-<% if action_name == "show" || action_name == "update" %>7<% else %>9<% end %>">
		<div class="input-group">
			<span class="input-group-addon" id="addon-nome"><%= @pessoa.tipo ? "Razão Social *" : "Nome *" %></span>
			<%= f.text_field :nome, class: "form-control #{f.object.errors[:nome].first ? 'input-error' : ''}", "aria-describedby" => "addon-nome", :required => true %>
		</div>
	</div>
</div>

<div class="row">
	<div class="col-lg-4">
		<div class="input-group">
			<span class="input-group-addon" id="addon-email-contato">E-mail</span>
			<%= f.email_field :email_contato, class: "form-control #{f.object.errors[:email_contato].first ? 'input-error' : ''}", "aria-describedby" => "addon-email-contato" %>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="input-group">
			<span class="input-group-addon" id="addon-email-xml">E-mail XML</span>
			<%= f.email_field :email_xml, class: "form-control #{f.object.errors[:email_xml].first ? 'input-error' : ''}", "aria-describedby" => "addon-email-xml" %>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="input-group">
			<span class="input-group-addon" id="addon-telefone-principal">Telefone Principal *</span>
			<%= f.text_field :telefone_principal, class: "form-control #{f.object.errors[:telefone_principal].first ? 'input-error' : ''} masc-telefone", "aria-describedby" => "addon-telefone-principal", :required => true %>
		</div>
	</div>
</div>

<div class="row">
	<div id="pessoa_fisica" class="col-lg-12" <% if @pessoa.tipo %>style="display:none;"<% end %>>
		<%= f.fields_for :pessoa_fisica, @pessoa.pessoa_fisica do |pessoa_fisica|%>
		  <%= render "casein/pessoas_fisicas/form", f: pessoa_fisica %>
		<% end %>
	</div>

	<div id="pessoa_juridica" class="col-lg-12" <% unless @pessoa.tipo %>style="display:none;"<% end %>>
		<%= f.fields_for :pessoa_juridica, @pessoa.pessoa_juridica do |pessoa_juridica|%>
		  <%= render "casein/pessoas_juridicas/form", f: pessoa_juridica %>
		<% end %>
	</div>
</div>

<div id="pessoas_contatos" style="display:<%= @pessoa.tipo ? "block" : "none" %>;">
	<div class="row">
		<div class="col-lg-12">
			<h2>
				Contatos da Empresa
				<%= link_to_add_fields "#{casein_show_icon "plus-sign"}Incluir Contato".html_safe, f, :pessoas_contatos, "pull-right", "Adicionar um Novo Contato", "pessoas_contatos" %>
			</h2>
		</div>
	</div>

	<%= f.fields_for :pessoas_contatos do |pessoa_contato|%>
	  <%= render "casein/pessoas_contatos/form", f: pessoa_contato %>
	<% end %>
</div>

<h2>Endereço</h2>
<%= f.fields_for :pessoa_endereco, @pessoa.pessoa_endereco do |pessoa_endereco|%>
	<%= render "casein/pessoas_enderecos/form", f: pessoa_endereco %>
<% end %>

<div class="modal fade" id="modal-valida-pessoa">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 class="modal-title">Atenção! Esta pessoa já está cadastrada no Sistema!</h4>
			</div>
			<div class="modal-body" style="text-align:center;padding:50px 0;">
				<p style="padding:0 20px 10px 20px;font-size: 18px;font-weight: bold;">Ela pode ter sido cadastrada com um Usuário, Cliente ou Funcionário.</p>
				<button type="button" class="btn btn-lg btn-success" id="valida-pessoa-ir-para">Ir para o Cadastro</button>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script type="text/javascript">
	$(document).ready(function($) {
		$(".checkbox_tipo_pessoa").change(function(){
	    if ($(this).val() == "true"){
	      $("#pessoa_fisica").hide();
	      $("#pessoa_juridica").show();
	      $("#pessoas_contatos").show();
	      $("#addon-nome").html("Razão Social *");
	      $("#addon-email-xml").html("E-mail XML *");
	    } else {
	      $("#pessoa_fisica").show();
	      $("#pessoa_juridica").hide();
	      $("#pessoas_contatos").hide();
	      $("#addon-nome").html("Nome *");
	      $("#addon-email-xml").html("E-mail XML");
	    }
	  });
	});
</script>
